---
title: Glytoucan Linked Data
layout: default
---

## handling RDF with care

The following is an example of how the tools developed are used in order to maintain the linked data currently residing in the [Glycan Repository](http://glytoucan.org).  A list of each tool or library is available after this example.

The open-source version 7.2 was compiled and setup to run in all of our environments.  One of the first steps required is to transfer the data stored in the glyspace database into the quadstore as RDF.  To accomplish this, a gs2virt batch program was written.  Once the batch is complete, a base GlycoRDF ontology with glycoct sequences will be available.  The glycoct strings are stored in the GlycoSequence class, for example:

```
<http://rdf.glycoinfo.org/glycan/G64632PP/glycoct>
        a                              glycan:glycosequence ;
        glycan:has_sequence            "RES\n1b:x-dglc-HEX-1:5\n2s:n-acetyl\n3b:b-dglc-HEX-1:5\n4s:n-acetyl\n5b:b-dman-HEX-1:5\n6b:a-dman-HEX-1:5\n7b:a-dman-HEX-1:5\n8b:a-dman-HEX-1:5\n9b:a-dman-HEX-1:5\n10b:a-dman-HEX-1:5\nLIN\n1:1d(2+1)2n\n2:1o(4+1)3d\n3:3d(2+1)4n\n4:3o(4+1)5d\n5:5o(3+1)6d\n6:6o(2+1)7d\n7:5o(6+1)8d\n8:8o(3+1)9d\n9:8o(6+1)10d\nUND\nUND1:100.0:100.0\nParentIDs:7|9\nSubtreeLinkageID1:o(2+1)d\nRES\n11b:a-dman-HEX-1:5"^^xsd:string ;
        glycan:in_carbohydrate_format  glycan:carbohydrate_format_glycoct .
        
```

However in order to have functionality such as a motif search (a substructure search), it was necessary to extract the components(parts of substructures) of each sequence into RDF.  The fastest method we could find that was able to handle all of the structures that were registered in the database was the wurcsRDF format.  Thus the end-goal was to have a wurcsRDF dataset generated for each sequence that was registered.

How the wurcsRDF format was generated and why, is beyond the scope of this article.

In order to extract wurcsRDF, we first need to convert all of the glycoct data into wurcs format.  The [glyctoucan batch](http://code.glytoucan.org/batch/) program was written to retrieve data using sparql, manipulate the data, and then export it back into the quadstore.  By applying the proper sparql to retrieve the sequences and convert them using the [glycocttowurcs](https://bitbucket.org/glycosw/glycocttowurcs) library, we were able to generate the wurcs glycosequences:

```
<http://rdf.glycoinfo.org/glycan/G64632PP> glycan:has_glycosequence <http://www.glycoinfo.org/rdf/glycan/G64632PP/wurcs> .
  glycan:has_sequence "WURCS=2.0/4,9,8/[x2122h-1x_1-5_2*NCC/3=O][12122h-1b_1-5_2*NCC/3=O][11122h-1b_1-5][21122h-1a_1-5]/1-2-3-4-4-4-4-4-4/a4-b1_b4-c1_c3-d1_c6-f1_d2-e1_f3-g1_f6-h1_i1-e2|g2"^^xsd:string .
  glycan:in_carbohydrate_format glycan:carbohydrate_format_wurcs .
```
This was very straightforward thanks to the GlycoRDF definition.

Once wurcs conversion is complete, a wurcsRDF ttl could quickly be generated by passing each wurcs sequence into the wurcsToRDF class of the wurcsframework library.
After the TTL file is loaded, a more complex batch process was found to be required:

1. Retrieve the list of Motifs (those Saccharides with the "a Motif" definition)
2. For each motif:
  * execute a substructure query on the entire list of structures in the wurcsRDF - once again using wurcsframework.  This time making use of the wurcs2sparql method.
  * retrieve the list of substructures
  * add the "has_motif" predicate between the motif and the substructure. 
3. continue until all motifs are complete.

With this, the has_motif predicate is now available, so a standard query can be used on all structures to find all of the motifs available.

The quadstore chosen to manage the linked data was Virtuoso.  
  * [rdf](ontology)
  * gs2virt postgresql database to rdf converter
  * bitbucket
  wurcsframework
  * glycocttowurcs
  * bitbucket
  * mass calculation
  * github
  * substructure sparql
4. glytoucan batch
  * github
  * spring batch